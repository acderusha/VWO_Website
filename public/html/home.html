<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Venice Without Obstacles</title>
    <link rel="stylesheet" type="text/css" href="css/home.css"/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
          integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
          crossorigin=""/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
            integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
            crossorigin=""></script>
    <script src="js/home.js"></script>
</head>
<body style="padding-top: 50px">
    <div class="body">
        <div class="header" style="left: 0px">
            <div id="homeBtn" class="headerBtn headerLeft"><b>HOME</b></div>
            <div id="bridgeBtn" class="headerBtn headerLeft"><b>BRIDGES</b></div>
            <div id="projectLogo" class="headerBtn headerRight"><b>VENICE WITHOUT OBSTACLES</b></div>
        </div>
    </div>

    <table id="table" width="100% !important">
       <tr>
           <th class="filterSection" valign="top">
            <div id="filterBox" class="filterBox">
                <div style="color: lightgray; font-size: 20px; border-bottom: 1px lightgray solid; padding-bottom: 3px">
                    Filters
                </div>
                <div id="ramp" class="filterBoxItemClick">
                    &#9656 Ramps
                </div>
                <div id="perm" class="filterBoxItem" style="display: none; margin-left: 30px">
                    Permanent
                </div>
                <div id="temp" class="filterBoxItem" style="display: none; margin-left: 30px">
                    Temporary
                </div>
                <div id="ramp_none" class="filterBoxItem" style="display: none; margin-left: 30px">
                    No Ramp
                </div>
                <div id="railing" class="filterBoxItemClick">
                    &#9656 Railing
                </div>
                <div id="both" class="filterBoxItem" style="display: none; margin-left: 30px">
                    Both Sides
                </div>
                <div id="one" class="filterBoxItem" style="display: none; margin-left: 30px">
                    One Side
                </div>
                <div id="rail_none" class="filterBoxItem" style="display: none; margin-left: 30px">
                    No Railings
                </div>
                <div id="slip" class="filterBoxItemClick">
                    &#9656 Slip Stair Edging
                </div>
                <div id="installSlip" class="filterBoxItem" style="display: none; margin-left: 30px">
                    Installed Edging
                </div>
                <div id="noneSlip" class="filterBoxItem" style="display: none; margin-left: 30px">
                    No Edging
                </div>
                <div id="opening" class="filterBoxItemClick">
                    &#9656 Canal Opening
                </div>
                <div id="openBoth" class="filterBoxItem" style="display: none; margin-left: 30px">
                    Opening Both Sides
                </div>
                <div id="openOne" class="filterBoxItem" style="display: none; margin-left: 30px">
                    Opening One Side
                </div>
                <div id="openNone" class="filterBoxItem" style="display: none; margin-left: 30px">
                    No Openings
                </div>
                <div id="tactile" class="filterBoxItemClick">
                    &#9656 Tactile Pavement
                </div>
                <div id="installTact" class="filterBoxItem" style="display: none; margin-left: 30px">
                    Installed Tactile
                </div>
                <div id="noneTact" class="filterBoxItem" style="display: none; margin-left: 30px">
                    No Tactile
                </div>
                <div id="private" class="filterBoxItem">
                    Private
                </div>

                <script>
                    var ramp = document.getElementById("ramp");
                    var rampPer = document.getElementById("perm");
                    var rampTemp = document.getElementById("temp");
                    var rampNone = document.getElementById("ramp_none");

                    var rail = document.getElementById("railing");
                    var railBoth = document.getElementById("both");
                    var railOne = document.getElementById("one");
                    var railNone = document.getElementById("rail_none");

                    var slip = document.getElementById("slip");
                    var slipInstall = document.getElementById("installSlip");
                    var slipNone = document.getElementById("noneSlip");

                    var open = document.getElementById("opening");
                    var openBoth = document.getElementById("openBoth");
                    var openOne = document.getElementById("openOne");
                    var openNone = document.getElementById("openNone");

                    var tact = document.getElementById("tactile");
                    var tactInstall = document.getElementById("installTact");
                    var tactNone = document.getElementById("noneTact");

                    var priv = document.getElementById("private");

                    /* -------------------------- Display Event Listeners ---------------------- */
                    ramp.addEventListener("click", function () {
                        if(rampPer.style.display === "none"){
                            rampPer.style.display = "block";
                            rampTemp.style.display = "block";
                            rampNone.style.display = "block";

                            ramp.innerHTML = "&#9662 Ramps";
                        }
                        else{
                            rampPer.style.display = "none";
                            rampTemp.style.display = "none";
                            rampNone.style.display = "none";

                            ramp.innerHTML = "&#9656 Ramps";
                        }
                    });

                    rail.addEventListener("click", function () {
                        if(railBoth.style.display === "none"){
                            railBoth.style.display = "block";
                            railOne.style.display = "block";
                            railNone.style.display = "block";

                            rail.innerHTML = "&#9662 Railing";
                        }
                        else{
                            railBoth.style.display = "none";
                            railOne.style.display = "none";
                            railNone.style.display = "none";

                            rail.innerHTML = "&#9656 Railing";
                        }
                    });

                    slip.addEventListener("click", function () {
                        if(slipInstall.style.display === "none"){
                            slipInstall.style.display = "block";
                            slipNone.style.display = "block";

                            slip.innerHTML = "&#9662 Slip Stair Edging";
                        }
                        else{
                            slipInstall.style.display = "none";
                            slipNone.style.display = "none";

                            slip.innerHTML = "&#9656 Slip Stair Edging";
                        }
                    });

                    open.addEventListener("click", function () {
                        if(openBoth.style.display === "none"){
                            openBoth.style.display = "block";
                            openOne.style.display = "block";
                            openNone.style.display = "block";

                            open.innerHTML = "&#9662 Canal Opening";
                        }
                        else{
                            openBoth.style.display = "none";
                            openOne.style.display = "none";
                            openNone.style.display = "none";

                            open.innerHTML = "&#9656 Canal Opening";
                        }
                    });

                    tact.addEventListener("click", function () {
                        if(tactInstall.style.display === "none"){
                            tactInstall.style.display = "block";
                            tactNone.style.display = "block";

                            tact.innerHTML = "&#9662 Tactile Pavement";
                        }
                        else{
                            tactInstall.style.display = "none";
                            tactNone.style.display = "none";

                            tact.innerHTML = "&#9656 Tactile Pavement";
                        }
                    });

                    /* -------------------------- Filter Event Listeners ---------------------- */

                    var rampPerFilter = true;
                    var rampTempFilter = true;
                    var rampNoneFilter = true;
                    var railBothFilter = true;
                    var railOneFilter = true;
                    var railNoneFilter = true;
                    var slipInstallFilter = true;
                    var slipNoneFilter = true;
                    var openBothFilter = true;
                    var openOneFilter = true;
                    var openNoneFilter = true;
                    var tactInstallFilter = true;
                    var tactNoneFilter = true;
                    var privFilter = true;

                    rampPer.addEventListener("click", function () {
                        if(rampPer.style.color === "lightgray"){
                            rampPer.style.color = "white";

                            /* ---- Remove Permanent Ramp Filter ---- */
                            rampPerFilter = true;
                            filterLayer();
                        }
                        else{
                            rampPer.style.color = "lightgray";

                            /* ---- Permanent Ramp Filter ---- */
                            rampPerFilter = false;
                            filterLayer();
                        }
                    });
                    rampTemp.addEventListener("click", function () {
                        if(rampTemp.style.color === "lightgray") {
                            rampTemp.style.color = "white";

                            /* ---- Remove Temporary Ramp Filter ---- */
                            rampTempFilter = true;
                            filterLayer();
                        }
                        else{
                            rampTemp.style.color = "lightgray";

                            /* ---- Temporary Ramp Filter ---- */
                            rampTempFilter = false;
                            filterLayer();
                        }
                    });
                    rampNone.addEventListener("click", function () {
                        if(rampNone.style.color === "lightgray") {
                            rampNone.style.color = "white";

                            /* ---- Remove None Ramp Filter ---- */
                            rampNoneFilter = true;
                            filterLayer();
                        }
                        else{
                            rampNone.style.color = "lightgray";

                            /* ---- None Ramp Filter ---- */
                            rampNoneFilter = false;
                            filterLayer();
                        }
                    });

                    railBoth.addEventListener("click", function () {
                        if(railBoth.style.color === "lightgray"){
                            railBoth.style.color = "white";

                            /* ---- Remove Both Rail Filter ---- */
                            railBothFilter = true;
                            filterLayer();
                        }
                        else{
                            railBoth.style.color = "lightgray";

                            /* ---- Both Rail Filter ---- */
                            railBothFilter = false;
                            filterLayer();
                        }
                    });
                    railOne.addEventListener("click", function () {
                        if(railOne.style.color === "lightgray") {
                            railOne.style.color = "white";

                            /* ---- Remove One Rail Filter ---- */
                            railOneFilter = true;
                            filterLayer();
                        }
                        else{
                            railOne.style.color = "lightgray";

                            /* ---- One Rail Filter ---- */
                            railOneFilter = false;
                            filterLayer();
                        }
                    });
                    railNone.addEventListener("click", function () {
                        if(railNone.style.color === "lightgray") {
                            railNone.style.color = "white";

                            /* ---- Remove None Rail Filter ---- */
                            railNoneFilter = true;
                            filterLayer();
                        }
                        else{
                            railNone.style.color = "lightgray";

                            /* ---- None Rail Filter ---- */
                            railNoneFilter = false;
                            filterLayer();
                        }
                    });

                    slipInstall.addEventListener("click", function () {
                        if(slipInstall.style.color === "lightgray"){
                            slipInstall.style.color = "white";

                            /* ---- Remove Install Slip Filter ---- */
                            slipInstallFilter = true;
                            filterLayer();
                        }
                        else{
                            slipInstall.style.color = "lightgray";

                            /* ---- Install Slip Filter ---- */
                            slipInstallFilter = false;
                            filterLayer();
                        }
                    });
                    slipNone.addEventListener("click", function () {
                        if(slipNone.style.color === "lightgray"){
                            slipNone.style.color = "white";

                            /* ---- Remove Install Slip Filter ---- */
                            slipNoneFilter = true;
                            filterLayer();
                        }
                        else{
                            slipNone.style.color = "lightgray";

                            /* ---- Install Slip Filter ---- */
                            slipNoneFilter = false;
                            filterLayer();
                        }
                    });

                    openBoth.addEventListener("click", function () {
                        if(openBoth.style.color === "lightgray") {
                            openBoth.style.color = "white";

                            /* ---- Remove Both Opening Filter ---- */
                            openBothFilter = true;
                            filterLayer();
                        }
                        else{
                            openBoth.style.color = "lightgray";

                            /* ---- Both Opening Filter ---- */
                            openBothFilter = false;
                            filterLayer();
                        }
                    });
                    openOne.addEventListener("click", function () {
                        if(openOne.style.color === "lightgray") {
                            openOne.style.color = "white";

                            /* ---- Remove One Opening Filter ---- */
                            openOneFilter = true;
                            filterLayer();
                        }
                        else{
                            openOne.style.color = "lightgray";

                            /* ---- One Opening Filter ---- */
                            openOneFilter = false;
                            filterLayer();
                        }
                    });
                    openNone.addEventListener("click", function () {
                        if(openNone.style.color === "lightgray") {
                            openNone.style.color = "white";

                            /* ---- Remove None Opening Filter ---- */
                            openNoneFilter = true;
                            filterLayer();
                        }
                        else{
                            openNone.style.color = "lightgray";

                            /* ---- None Opening Filter ---- */
                            openNoneFilter = false;
                            filterLayer();
                        }
                    });

                    tactInstall.addEventListener("click", function () {
                        if(tactInstall.style.color === "lightgray") {
                            tactInstall.style.color = "white";

                            /* ---- Remove Installed Tactile Filter ---- */
                            tactInstallFilter = true;
                            filterLayer();
                        }
                        else{
                            tactInstall.style.color = "lightgray";

                            /* ---- Installed Tactile Filter ---- */
                            tactInstallFilter = false;
                            filterLayer();
                        }
                    });
                    tactNone.addEventListener("click", function () {
                        if(tactNone.style.color === "lightgray") {
                            tactNone.style.color = "white";

                            /* ---- Remove None Tactile Filter ---- */
                            tactNoneFilter = true;
                            filterLayer();
                        }
                        else{
                            tactNone.style.color = "lightgray";

                            /* ---- None Tactile Filter ---- */
                            tactNoneFilter = false;
                            filterLayer();
                        }
                    });

                    priv.addEventListener("click", function () {
                        if(priv.style.color === "lightgray") {
                            priv.style.color = "white";

                            /* ---- Remove Private Filter ---- */
                            privFilter = true;
                            filterLayer();
                        }
                        else{
                            priv.style.color = "lightgray";

                            /* ---- Private Filter ---- */
                            privFilter = false;
                            filterLayer();
                        }
                    });
                </script>
            </div>
           </th>
           <th id="mapSection" valign="top">
               <div align="left" class="searchBarContainer">
                   <input type="text"  class="searchBar" id="searchBar" placeholder="Search Bridge Name...">
                   <i id="mic" class="fa">&#xf130;</i>
               </div>
               <table id="mapDes" class="mapDescTable">
                   <tr>
                       <th width="100%" valign="top">
                           <div id="mapid"></div>
                       </th>
                       <th id="descBoxContainer">
                           <div id="descBox" class="descBox" >
                               <div style="width: 100%; height: 10px">
                                   <button id="close" class="closeBtn">&times;</button>
                               </div>
                               <script>
                                   var close = document.getElementById("close");
                                   var container = document.getElementById("descBoxContainer");
                                   close.addEventListener("click", function () {
                                       container.style.display = "none";
                                   });
                               </script>
                               <div style="color: lightgray; font-size: 24px; margin: 10px 0 0 25px">
                                   Bridge Description
                               </div>
                               <div class="descBoxItemMain">
                                   <i style="font-size:15px" class="fa">&#xf05a;</i>
                                   General Info
                               </div>
                               <div id="infoDiv" style="float: left"></div>
                               <div class="descBoxItemMain" style="margin-top: 20px">
                                   <i style="font-size:15px; color: lightgray" class="fa">&#xf193;</i>
                                   Accommodations
                               </div>
                               <div id="accomDiv" style="float: left"></div>
                               <div class="descBoxItemMain" style="margin-top: 20px">
                                   &#9888; Cautions
                               </div>
                               <div id="cautionDiv" style="float: left"></div>
                               <script>
                                   addDescription();
                               </script>
                           </div>
                       </th>
                   </tr>
               </table>
               <script>
                   var map = document.getElementById("mapid");
                   var mapColumn = document.getElementById("mapSection");

                   var width = mapColumn.getAttribute("width");
                   map.style.width = width;
               </script>
           </th>
       </tr>
    </table>
    <script>
        /* --------------------------------- Map Initialization  ------------------------------------ */
        var mymap = L.map('mapid').setView([45.437309, 12.335072], 14);
        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
            maxZoom: 18,
            subdomains: ['a','b','c','d'],
            id: 'mapbox.streets',
            accessToken: 'pk.eyJ1IjoidmVuaWNld2l0aG91dG9ic3RhY2xlcyIsImEiOiJjam55azU0MHgxNTR4M3BrYjh2NzV1d3lyIn0.6EVMzVUveIUc-0BJfMijJw'
        }).addTo(mymap);

        mymap.doubleClickZoom.disable();

        /*var popup = L.popup();

        function onMapClick(e) {
            popup
                .setLatLng(e.latlng)
                .setContent("You clicked the map at " + e.latlng.toString())
                .openOn(mymap);
        }
        mymap.on('click', onMapClick);*/

        var bridgeLayer = L.geoJson(bridges, {style: style, onEachFeature: onEachFeature});
        bridgeLayer.addTo(mymap);

        addMapElements();
    </script>

</body>
</html>